<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynexAPI - API Servisleri</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ SynexAPI</h1>
            <p>√áe≈üitli API servisleri</p>
        </header>

        <div class="api-cards">
            <!-- 1. API Kartƒ±: Anime -->
            <div class="api-card">
                <div class="api-header">
                    <div class="method-badge post">POST</div>
                    <div class="api-title">Anime</div>
                </div>

                <div class="endpoint">/api/anime</div>

                <div class="description">
                    Anime kƒ±zƒ± evinde istermisin?
                </div>

                <div class="parameters">
                    <div class="section-title">Parameter:</div>
                    <div class="parameter">
                        <div class="checkbox"></div>
                        <div class="param-name">tag</div>
                        <div class="param-desc">Anime etiketi</div>
                    </div>
                    <div class="parameter">
                        <div class="checkbox checked">‚úì</div>
                        <div class="param-name">amount</div>
                        <div class="param-desc">Resim miktarƒ±</div>
                    </div>
                </div>

                <div class="response">
                    <div class="section-title">D√∂n√º≈ü:</div>
                    <div class="response-code">{
  "endpoint": "/api/anime",
  "images": [
    {
      "imageUrl": "https://i.waifu.pics/..."
    }
  ]
}</div>
                </div>

                <div class="api-footer">
                    <div class="date">08.02.2025</div>
                    <button class="copy-btn" onclick="copyToClipboard('anime')">
                        Kopyala
                    </button>
                    <span class="success-message" id="successAnime">Kopyalandƒ±!</span>
                </div>
            </div>

            <!-- 2. API Kartƒ±: Deprem -->
            <div class="api-card">
                <div class="api-header">
                    <div class="method-badge get">GET</div>
                    <div class="api-title">Deprem</div>
                </div>

                <div class="endpoint">/api/deprem</div>

                <div class="description">
                    AFAD resmi sitesinden ger√ßek zamanlƒ± deprem verileri
                </div>

                <div class="parameters">
                    <div class="section-title">Parameter:</div>
                    <div class="parameter">
                        <div class="checkbox"></div>
                        <div class="param-name">city</div>
                        <div class="param-desc">≈ûehir filtresi (istanbul, izmir, van, vb.)</div>
                    </div>
                    <div class="parameter">
                        <div class="checkbox checked">‚úì</div>
                        <div class="param-name">amount</div>
                        <div class="param-desc">Kayƒ±t sayƒ±sƒ± (default: 50, max: 200)</div>
                    </div>
                </div>

                <div class="response">
                    <div class="section-title">D√∂n√º≈ü:</div>
                    <div class="response-code">{
  "status": "success",
  "endpoint": "/api/deprem",
  "method": "GET",
  "source": "afad-web",
  "total": 3,
  "earthquakes": [
    {
      "id": 1,
      "date": "15.01.2024 14:30:00",
      "location": "MARMARA DENIZI - ISTANBUL",
      "magnitude": 4.5,
      "depth": 8.2,
      "coordinates": {
        "latitude": 40.9789,
        "longitude": 28.8301
      },
      "timestamp": "2024-01-15T14:30:00.000Z",
      "source": "AFAD"
    }
  ]
}</div>
                </div>

                <div class="api-footer">
                    <div class="date">08.02.2025</div>
                    <button class="copy-btn" onclick="copyToClipboard('deprem')">
                        Kopyala
                    </button>
                    <span class="success-message" id="successDeprem">Kopyalandƒ±!</span>
                </div>
            </div>

            <!-- 3. API Kartƒ±: Weather -->
            <div class="api-card">
                <div class="api-header">
                    <div class="method-badge get">GET</div>
                    <div class="api-title">Weather</div>
                </div>

                <div class="endpoint">/api/weather</div>

                <div class="description">
                    T√ºrkiye'deki ≈üehirlerin g√ºncel hava durumu bilgileri
                </div>

                <div class="parameters">
                    <div class="section-title">Parameter:</div>
                    <div class="parameter">
                        <div class="checkbox checked">‚úì</div>
                        <div class="param-name">city</div>
                        <div class="param-desc">≈ûehir adƒ± (√∂rn: istanbul, ankara, izmir)</div>
                    </div>
                    <div class="parameter">
                        <div class="checkbox"></div>
                        <div class="param-name">days</div>
                        <div class="param-desc">Tahmin g√ºn sayƒ±sƒ± (1-7, default: 7)</div>
                    </div>
                </div>

                <div class="response">
                    <div class="section-title">D√∂n√º≈ü:</div>
                    <div class="response-code">{
  "status": "success",
  "endpoint": "/api/weather",
  "city": "Istanbul",
  "country": "Turkey",
  "current": {
    "temperature": 18,
    "feels_like": 17,
    "humidity": 65,
    "pressure": 1013,
    "wind_speed": 12,
    "wind_direction": "NE",
    "description": "Par√ßalƒ± bulutlu",
    "icon": "partly-cloudy",
    "timestamp": "2024-01-15T14:30:00.000Z"
  },
  "forecast": [
    {
      "date": "2024-01-16",
      "min_temp": 12,
      "max_temp": 19,
      "description": "Hafif yaƒümurlu",
      "icon": "rainy"
    }
  ]
}</div>
                </div>

                <!-- Weather Demo Alanƒ± -->
                <div class="weather-demo">
                    <div class="section-title">Demo: Hava Durumu</div>
                    <div class="weather-container">
                        <div class="weather-input-group">
                            <input type="text" id="weatherCity" class="weather-input" placeholder="≈ûehir adƒ± girin (√∂rn: istanbul)" value="istanbul">
                            <button class="weather-btn" id="getWeather">Sorgula</button>
                        </div>
                        <div id="weatherResult" class="weather-result"></div>
                    </div>
                </div>

                <div class="api-footer">
                    <div class="date">08.02.2025</div>
                    <button class="copy-btn" onclick="copyToClipboard('weather')">
                        Kopyala
                    </button>
                    <span class="success-message" id="successWeather">Kopyalandƒ±!</span>
                </div>
            </div>

            <!-- 4. API Kartƒ±: D√∂viz -->
            <div class="api-card">
                <div class="api-header">
                    <div class="method-badge get">GET</div>
                    <div class="api-title">D√∂viz</div>
                </div>

                <div class="endpoint">/api/doviz</div>

                <div class="description">
                    G√ºncel d√∂viz kurlarƒ± ve altƒ±n fiyatlarƒ±
                </div>

                <div class="parameters">
                    <div class="section-title">Parameter:</div>
                    <div class="parameter">
                        <div class="checkbox"></div>
                        <div class="param-name">base</div>
                        <div class="param-desc">Baz d√∂viz (usd, eur, gbp, default: usd)</div>
                    </div>
                </div>

                <div class="response">
                    <div class="section-title">D√∂n√º≈ü:</div>
                    <div class="response-code">{
  "status": "success",
  "endpoint": "/api/doviz",
  "base_currency": {
    "name": "Amerikan Dolarƒ±",
    "symbol": "$",
    "code": "USD"
  },
  "timestamp": "2024-01-15T14:30:00.000Z",
  "currencies": {
    "USD": {
      "name": "Amerikan Dolarƒ±",
      "symbol": "$",
      "code": "USD",
      "buying": 28.45,
      "selling": 28.65,
      "rate": 28.55,
      "change": 0.15,
      "timestamp": "2024-01-15T14:30:00.000Z"
    }
  },
  "precious_metals": {
    "gold": {
      "name": "Gram Altƒ±n",
      "symbol": "g",
      "code": "XAU",
      "buying": 1850.5,
      "selling": 1860.2,
      "rate": 1855.3,
      "change": 5.7,
      "timestamp": "2024-01-15T14:30:00.000Z"
    }
  }
}</div>
                </div>

                <!-- D√∂viz Demo Alanƒ± -->
                <div class="doviz-demo">
                    <div class="section-title">Demo: D√∂viz Kurlarƒ±</div>
                    <div class="doviz-container">
                        <div class="doviz-input-group">
                            <select id="dovizBase" class="doviz-select">
                                <option value="usd">USD - Amerikan Dolarƒ±</option>
                                <option value="eur">EUR - Euro</option>
                                <option value="gbp">GBP - ƒ∞ngiliz Sterlini</option>
                                <option value="chf">CHF - ƒ∞svi√ßre Frangƒ±</option>
                                <option value="jpy">JPY - Japon Yeni</option>
                            </select>
                            <button class="doviz-btn" id="getDoviz">Sorgula</button>
                        </div>
                        <div id="dovizResult" class="doviz-result"></div>
                    </div>
                </div>

                <div class="api-footer">
                    <div class="date">08.02.2025</div>
                    <button class="copy-btn" onclick="copyToClipboard('doviz')">
                        Kopyala
                    </button>
                    <span class="success-message" id="successDoviz">Kopyalandƒ±!</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Weather API Frontend
        class WeatherAPI {
            constructor() {
                this.apiBaseUrl = '/api';
                this.init();
            }

            init() {
                this.setupEventListeners();
            }

            async getWeather() {
                const cityInput = document.getElementById('weatherCity');
                const city = cityInput.value.trim();
                const resultElement = document.getElementById('weatherResult');

                if (!city) {
                    this.showResult('‚ö†Ô∏è L√ºtfen bir ≈üehir adƒ± girin!', 'error');
                    return;
                }

                try {
                    this.showResult('‚è≥ Hava durumu sorgulanƒ±yor...', 'info');
                    const response = await fetch(`${this.apiBaseUrl}/weather?city=${encodeURIComponent(city)}`);
                    const data = await response.json();

                    if (data.status === 'success') {
                        this.displayWeather(data);
                    } else {
                        this.showResult(`‚ùå ${data.error}`, 'error');
                    }
                } catch (error) {
                    console.error('Hava durumu hatasƒ±:', error);
                    this.showResult('‚ùå Hava durumu bilgisi alƒ±namadƒ±!', 'error');
                }
            }

            displayWeather(data) {
                const resultElement = document.getElementById('weatherResult');
                const formatDate = (dateString) => {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('tr-TR', { 
                        weekday: 'short', 
                        day: 'numeric', 
                        month: 'short' 
                    });
                };

                const weatherHTML = `
                    <div class="weather-card">
                        <div class="weather-header">
                            <h3>${data.city}, ${data.country}</h3>
                            <div class="weather-main">
                                <div class="weather-temp">${data.current.temperature}¬∞C</div>
                                <div class="weather-desc">${data.current.description}</div>
                                <div class="weather-feels">Hissedilen: ${data.current.feels_like}¬∞C</div>
                            </div>
                        </div>
                        <div class="weather-details">
                            <div class="weather-detail">
                                <span class="detail-label">Nem:</span>
                                <span class="detail-value">${data.current.humidity}%</span>
                            </div>
                            <div class="weather-detail">
                                <span class="detail-label">R√ºzgar:</span>
                                <span class="detail-value">${data.current.wind_speed} km/s ${data.current.wind_direction}</span>
                            </div>
                            <div class="weather-detail">
                                <span class="detail-label">Basƒ±n√ß:</span>
                                <span class="detail-value">${data.current.pressure} hPa</span>
                            </div>
                            <div class="weather-detail">
                                <span class="detail-label">Yaƒüƒ±≈ü:</span>
                                <span class="detail-value">${data.current.precipitation} mm</span>
                            </div>
                        </div>
                        <div class="weather-forecast">
                            <h4>7 G√ºnl√ºk Tahmin</h4>
                            <div class="forecast-items">
                                ${data.forecast.map(day => `
                                    <div class="forecast-item">
                                        <div class="forecast-date">${formatDate(day.date)}</div>
                                        <div class="forecast-temp">${day.min_temp}¬∞ / ${day.max_temp}¬∞</div>
                                        <div class="forecast-desc">${day.description}</div>
                                        <div class="forecast-precip">${day.precipitation} mm</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="weather-source">
                            <small>Veri kaynaƒüƒ±: Open-Meteo API</small>
                        </div>
                    </div>
                `;

                resultElement.innerHTML = weatherHTML;
                resultElement.className = 'weather-result success';
                resultElement.style.display = 'block';
            }

            showResult(message, type) {
                const resultElement = document.getElementById('weatherResult');
                resultElement.textContent = message;
                resultElement.className = `weather-result ${type}`;
                resultElement.style.display = 'block';
            }

            setupEventListeners() {
                document.getElementById('getWeather').addEventListener('click', () => {
                    this.getWeather();
                });

                document.getElementById('weatherCity').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.getWeather();
                    }
                });
            }
        }

        // D√∂viz API Frontend
        class DovizAPI {
            constructor() {
                this.apiBaseUrl = '/api';
                this.init();
            }

            init() {
                this.setupEventListeners();
            }

            async getDoviz() {
                const baseSelect = document.getElementById('dovizBase');
                const base = baseSelect.value;
                const resultElement = document.getElementById('dovizResult');

                try {
                    this.showResult('‚è≥ D√∂viz kurlarƒ± alƒ±nƒ±yor...', 'info');
                    const response = await fetch(`${this.apiBaseUrl}/doviz?base=${encodeURIComponent(base)}`);
                    const data = await response.json();

                    if (data.status === 'success') {
                        this.displayDoviz(data);
                    } else {
                        this.showResult(`‚ùå ${data.error}`, 'error');
                    }
                } catch (error) {
                    console.error('D√∂viz hatasƒ±:', error);
                    this.showResult('‚ùå D√∂viz kurlarƒ± alƒ±namadƒ±!', 'error');
                }
            }

            displayDoviz(data) {
                const resultElement = document.getElementById('dovizResult');

                const dovizHTML = `
                    <div class="doviz-card">
                        <div class="doviz-header">
                            <h3>D√∂viz Kurlarƒ±</h3>
                            <div class="doviz-base">
                                Baz D√∂viz: ${data.base_currency.name} (${data.base_currency.symbol})
                            </div>
                            <div class="doviz-timestamp">
                                ${new Date(data.timestamp).toLocaleString('tr-TR')}
                            </div>
                        </div>
                        
                        <div class="doviz-currencies">
                            <h4>D√∂viz Kurlarƒ±</h4>
                            <div class="currency-grid">
                                ${Object.values(data.currencies).map(currency => `
                                    <div class="currency-item">
                                        <div class="currency-header">
                                            <span class="currency-name">${currency.name}</span>
                                            <span class="currency-code">${currency.code}</span>
                                        </div>
                                        <div class="currency-rates">
                                            <div class="rate-row">
                                                <span>Alƒ±≈ü:</span>
                                                <span class="rate-value">${currency.buying.toFixed(2)} ‚Ç∫</span>
                                            </div>
                                            <div class="rate-row">
                                                <span>Satƒ±≈ü:</span>
                                                <span class="rate-value">${currency.selling.toFixed(2)} ‚Ç∫</span>
                                            </div>
                                            <div class="rate-row">
                                                <span>Deƒüi≈üim:</span>
                                                <span class="rate-change ${currency.change >= 0 ? 'positive' : 'negative'}">
                                                    ${currency.change >= 0 ? '+' : ''}${currency.change.toFixed(2)}%
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        ${data.precious_metals && Object.keys(data.precious_metals).length > 0 ? `
                        <div class="doviz-metals">
                            <h4>Kƒ±ymetli Madenler</h4>
                            <div class="metal-grid">
                                ${Object.values(data.precious_metals).map(metal => `
                                    <div class="metal-item">
                                        <div class="metal-header">
                                            <span class="metal-name">${metal.name}</span>
                                            <span class="metal-code">${metal.code}</span>
                                        </div>
                                        <div class="metal-rates">
                                            <div class="rate-row">
                                                <span>Alƒ±≈ü:</span>
                                                <span class="rate-value">${metal.buying.toFixed(2)} ‚Ç∫</span>
                                            </div>
                                            <div class="rate-row">
                                                <span>Satƒ±≈ü:</span>
                                                <span class="rate-value">${metal.selling.toFixed(2)} ‚Ç∫</span>
                                            </div>
                                            <div class="rate-row">
                                                <span>Deƒüi≈üim:</span>
                                                <span class="rate-change ${metal.change >= 0 ? 'positive' : 'negative'}">
                                                    ${metal.change >= 0 ? '+' : ''}${metal.change.toFixed(2)}%
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}

                        ${data.note ? `
                        <div class="doviz-note">
                            <small>${data.note}</small>
                        </div>
                        ` : ''}
                    </div>
                `;

                resultElement.innerHTML = dovizHTML;
                resultElement.className = 'doviz-result success';
                resultElement.style.display = 'block';
            }

            showResult(message, type) {
                const resultElement = document.getElementById('dovizResult');
                resultElement.textContent = message;
                resultElement.className = `doviz-result ${type}`;
                resultElement.style.display = 'block';
            }

            setupEventListeners() {
                document.getElementById('getDoviz').addEventListener('click', () => {
                    this.getDoviz();
                });
            }
        }

        // Copy to clipboard function
        function copyToClipboard(type) {
            let responseCode;
            if (type === 'anime') {
                responseCode = `{
  "endpoint": "/api/anime",
  "images": [
    {
      "imageUrl": "https://i.waifu.pics/..."
    }
  ]
}`;
            } else if (type === 'deprem') {
                responseCode = `{
  "status": "success",
  "endpoint": "/api/deprem", 
  "method": "GET",
  "source": "afad-web",
  "total": 3,
  "earthquakes": [
    {
      "id": 1,
      "date": "15.01.2024 14:30:00",
      "location": "MARMARA DENIZI - ISTANBUL",
      "magnitude": 4.5,
      "depth": 8.2,
      "coordinates": {
        "latitude": 40.9789,
        "longitude": 28.8301
      },
      "timestamp": "2024-01-15T14:30:00.000Z",
      "source": "AFAD"
    }
  ]
}`;
            } else if (type === 'weather') {
                responseCode = `// Hava Durumu API Kullanƒ±mƒ±
GET /api/weather?city=istanbul

// Response:
{
  "status": "success",
  "endpoint": "/api/weather",
  "city": "Istanbul",
  "country": "Turkey",
  "current": {
    "temperature": 18,
    "feels_like": 17,
    "humidity": 65,
    "pressure": 1013,
    "wind_speed": 12,
    "wind_direction": "NE",
    "description": "Par√ßalƒ± bulutlu",
    "icon": "partly-cloudy",
    "timestamp": "2024-01-15T14:30:00.000Z"
  },
  "forecast": [
    {
      "date": "2024-01-16",
      "min_temp": 12,
      "max_temp": 19,
      "description": "Hafif yaƒümurlu",
      "icon": "rainy"
    }
  ]
}`;
            } else if (type === 'doviz') {
                responseCode = `// D√∂viz API Kullanƒ±mƒ±
GET /api/doviz?base=usd

// Response:
{
  "status": "success",
  "endpoint": "/api/doviz",
  "base_currency": {
    "name": "Amerikan Dolarƒ±",
    "symbol": "$",
    "code": "USD"
  },
  "timestamp": "2024-01-15T14:30:00.000Z",
  "currencies": {
    "USD": {
      "name": "Amerikan Dolarƒ±",
      "symbol": "$",
      "code": "USD",
      "buying": 28.45,
      "selling": 28.65,
      "rate": 28.55,
      "change": 0.15,
      "timestamp": "2024-01-15T14:30:00.000Z"
    }
  },
  "precious_metals": {
    "gold": {
      "name": "Gram Altƒ±n",
      "symbol": "g",
      "code": "XAU",
      "buying": 1850.5,
      "selling": 1860.2,
      "rate": 1855.3,
      "change": 5.7,
      "timestamp": "2024-01-15T14:30:00.000Z"
    }
  }
}`;
            }
            
            navigator.clipboard.writeText(responseCode).then(() => {
                const successMessage = document.getElementById(`success${type.charAt(0).toUpperCase() + type.slice(1)}`);
                successMessage.style.display = 'inline';
                
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 2000);
            });
        }

        // Checkbox animasyonu
        document.querySelectorAll('.parameter').forEach(item => {
            item.addEventListener('click', function() {
                const checkbox = this.querySelector('.checkbox');
                checkbox.classList.toggle('checked');
                
                if (checkbox.classList.contains('checked')) {
                    checkbox.innerHTML = '‚úì';
                } else {
                    checkbox.innerHTML = '';
                }
            });
        });

        // Sayfa y√ºklendiƒüinde API'leri ba≈ülat
        document.addEventListener('DOMContentLoaded', function() {
            window.weatherAPI = new WeatherAPI();
            window.dovizAPI = new DovizAPI();
        });
    </script>
</body>
</html>